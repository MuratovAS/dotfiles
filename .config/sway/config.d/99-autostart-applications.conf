# enable idle mode
exec $idle

# autostart background applications
exec /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec $notifications

# if-exists autostarts
#
exec {
    '[ -x "$(command -v flashfocus)" ] && flashfocus'
    '[ -x "$(command -v wlsunset)" ] && $HOME/.config/sway/scripts/sunset.sh "on"'
    '[ -x "$(command -v autotiling)" ] && autotiling'
    '[ -x "$(command -v wl-paste)" ] && [ -x "$(command -v clipman)" ] && wl-paste -t text --watch clipman store --max-items=60 --histpath="~/.local/share/clipman.json"'

	#If you start without delay, the icon in the status bar is not displayed
	'[ -x "$(command -v kdeconnect-indicator)" ] && sleep 1 && kdeconnect-indicator
	'[ -x "$(command -v telegram-desktop)" ] && sleep 2 && telegram-desktop -startintray
	'[ -x "$(command -v nextcloud)" ] && sleep 3 && nextcloud --background
}
exec_always {
    '[ -x "$(command -v spice-vdagent)" ] && spice-vdagent'
    # restart kanshi https://github.com/emersion/kanshi/issues/43#issuecomment-531679213
    '[ -x "$(command -v kanshi)" ] && pkill kanshi; exec kanshi'
    '[ -x "$(command -v sway-xkb-switcher)" ] && pkill sway-xkb-switcher; exec sway-xkb-switcher'
    '[ -x "$(command -v sworkstyle)" ] && pkill sworkstyle; sworkstyle &> /tmp/sworkstyle.log'
	'[ -x "$(command -v playerctl)" ] && pkill playerctl;  playerctl -a metadata --format \'{{status}} {{title}}\' --follow | while read line; do pkill -RTMIN+5 waybar; done'
}
