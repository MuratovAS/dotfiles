### Variables
#
# Logo key. Use Mod1 for Alt and Mod4 for Super.
set $mod Mod4

# Add --to-code to bindsym, support for non-latin layouts
set $bindsym bindsym --to-code
# For user's convenience, the same for unbindsym
set $unbindsym unbindsym --to-code

set $theme $HOME/.config/sway/themes/matcha-orange
set $background $HOME/.config/sway/background/3.png
output "Virtual-1" resolution 1440x900  position 0,0 scale 1

set $rofi_dir $HOME/.config/rofi/

# Your preferred terminal emulator
set $term kitty
set $term_float $term --class=floating_shell
set $term_float_portrait $term --class=floating_shell_portrait

### Lockscreen configuration
#
set $locking swaylock --daemonize --config $theme/swaylock

### Idle configuration
# This will lock your screen after 300 seconds of inactivity, then turn off
# your displays after another 300 seconds, and turn your screens back on when
# resumed. It will also lock your screen before your computer goes to sleep.
#
set $idle swayidle -w \
    timeout 240 'light -G > /tmp/brightness && light -S 10' resume 'light -S $([ -f /tmp/brightness ] && cat /tmp/brightness || echo 100%)' \
    timeout 600 'exec $locking' \
    timeout 1200 'swaymsg "output * dpms off"' \
    resume 'swaymsg "output * dpms on"' \
    before-sleep 'exec $locking'

# statusbar command
set $statusbar waybar
set $waybar_position top

# shutdown command
#set $shutdown wlogout --buttons-per-row 4
set $shutdown bash $rofi_dir/logout/logout.sh

# pulseaudio command
set $pulseaudio $term_float pulsemixer

# onscreen bar
set $onscreen_bar bash $HOME/.config/sway/scripts/wob.sh $theme/wob

# calendar application
set $calendar $term_float khal interactive

#Notification command
set $notifications mako -c $theme/mako

# brightness control
set $brightness_step bash -c 'echo $(( $(light -Mr) / 100 * 5 < 1 ? 1 : $(( $(light -Mr) / 100 * 5 )) ))'
set $brightness_up light -r -A $($brightness_step) && $onscreen_bar $(light -G | cut -d'.' -f1)
set $brightness_down light -r -U $($brightness_step) && $onscreen_bar $(light -G | cut -d'.' -f1)

# audio control
set $sink_volume pactl get-sink-volume @DEFAULT_SINK@ | grep '^Volume:' | cut -d / -f 2 | tr -d ' ' | sed 's/%//'
set $source_volume pactl get-source-volume @DEFAULT_SOURCE@ | grep '^Volume:' | cut -d / -f 2 | tr -d ' ' | sed 's/%//'
set $volume_down $onscreen_bar $(pactl set-sink-volume @DEFAULT_SINK@ -5% && $sink_volume)
set $volume_up $onscreen_bar $(pactl set-sink-volume @DEFAULT_SINK@ +5% && $sink_volume)
set $volume_mute $onscreen_bar $(pactl set-sink-mute @DEFAULT_SINK@ toggle && pactl get-sink-mute @DEFAULT_SINK@ | sed -En "/no/ s/.*/$($sink_volume)/p; /yes/ s/.*/0/p")
set $mic_mute $onscreen_bar $(pactl set-source-mute @DEFAULT_SOURCE@ toggle && pactl get-source-mute @DEFAULT_SOURCE@ | sed -En "/no/ s/.*/$($source_volume)/p; /yes/ s/.*/0/p")


# Your preferred application launcher
#set $menu wofi --show 'drun,run' -I --exec-search --prompt "Run Command" --term $term
set $menu rofi -no-lazy-grab -show drun -modi drun -theme $rofi_dir/launcher_icon/blurry

# workspace names
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

# show clipboard history
# TODO
bindsym --to-code $mod+Shift+v exec clipman pick --tool="rofi" --tool-args="-theme '$rofi_dir/clipman/style_8'"  --histpath="~/.local/share/clipman.json" ###История буфера обмена
